var pwiCore={JSON_RPC:"/jsonrpc",playerid:-1,playertime:"",init:function(){setInterval("pwiCore.getActivePlayer()",500)},setPlayerId:function(t){pwiCore.playerid=t},getActivePlayer:function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetActivePlayer",data:'{ "jsonrpc": "2.0", "method": "Player.GetActivePlayers", "id": 1 }',success:jQuery.proxy(function(t){if(t&&t.result&&t.result[0])pwiCore.setPlayerId(t.result[0].playerid),pwiCore.getCurrentlyPlaying(),pwiCore.getPlayerProperties()
else{$("#home-list").children('[data-current-media="divider"]').hide(),$("#home-list").children('[data-current-media="info"]').hide()
try{$("#home-list").listview("refresh")}catch(e){}}},this),dataType:"json"})},getPlayerProperties:function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetPlayerProperties",data:'{ "jsonrpc": "2.0", "method": "Player.GetProperties", "params" : { "playerid": '+pwiCore.playerid+', "properties": [ "time", "totaltime" ] }, "id": 1 }',success:jQuery.proxy(function(t){t&&t.result&&t.result&&(pwiCore.playertime="",t.result.time.hours>0&&(pwiCore.playertime+=t.result.time.hours+":"),pwiCore.playertime+=t.result.time.minutes+":"+pwiUtils.leadingZero(t.result.time.seconds)+" / ",t.result.totaltime.hours>0&&(pwiCore.playertime+=t.result.totaltime.hours+":"),pwiCore.playertime+=t.result.totaltime.minutes+":"+pwiUtils.leadingZero(t.result.totaltime.seconds))},this),dataType:"json"})},getCurrentlyPlaying:function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetCurrentlyPlaying",data:'{ "jsonrpc": "2.0", "method": "Player.GetItem", "params": { "playerid": '+pwiCore.playerid+', "properties": [ "title", "showtitle", "artist", "thumbnail" ] }, "id": 1 }',success:jQuery.proxy(function(t){t&&t.result&&($('#home-list li[data-current-media="info"]').is(":visible")||($('#home-list li[data-current-media="info"]').show(),$('#home-list li[data-current-media="divider"]').show()),$('[data-current-media="title"]').text(t.result.item.title),$('[data-current-media="artist"]').text(t.result.item.artist),$('[data-current-media="player-time"]').text(pwiCore.playertime),$('[data-current-media="thumbnail"]').attr("src","/image/"+encodeURI(t.result.item.thumbnail)),$('[data-currentlyplaying="info"]').each(function(){t.result.item&&(0==pwiCore.playerid?$(this).html(""+t.result.item.title+'<br /><span class="smallfont">'+t.result.item.artist+'</span><br /><span class="smallerfont">'+pwiCore.playertime+"</span>"):1==pwiCore.playerid&&(t.result.item.showtitle?$(this).html('<span class="smallfont">'+t.result.item.showtitle+"</span><br />"+t.result.item.title+'<br /><span class="smallerfont">'+pwiCore.playertime+"</span>"):$(this).html(t.result.item.title+'<br /><span class="smallerfont">'+pwiCore.playertime+"</span>")))
try{$("#homelist").listview("refresh")}catch(e){}}))},this),dataType:"json"})},scan:function(t){var e=""
"video"==t?e='{ "jsonrpc": "2.0", "method": "AudioLibrary.Scan", "id": 1 }':"video"==t&&(e='{ "jsonrpc": "2.0", "method": "VideoLibrary.Scan", "id": 1 }'),jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?Scan",data:e,success:jQuery.proxy(function(){},this),dataType:"json"})}},pwiRemote={isInitialized:!1,init:function(){pwiRemote.isInitialized||(pwiRemote.getVolume(),$("[data-remote-action]").on("click",function(){pwiRemote.remotePressed($(this).attr("data-remote-action"),$(this).attr("data-remote-params"))}),pwiRemote.isInitialized=!0)},remotePressed:function(t,e){var i=""
""==e?i='{ "jsonrpc": "2.0", "method": "'+t+'", "id": 1 }':"player"==e?i='{ "jsonrpc": "2.0", "method": "'+t+'", "params": { "playerid": '+pwiCore.playerid+" } }":(e=e.split("'").join('"'),i='{ "jsonrpc": "2.0", "method": "'+t+'", "params": { "playerid": '+pwiCore.playerid+", "+e+" } }"),jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?SendRemoteKey",data:i,success:jQuery.proxy(function(){},this),dataType:"json"})},getVolume:function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?SendRemoteKey",data:'{ "jsonrpc": "2.0", "method": "Application.GetProperties", "params": { "properties": [ "volume" ] }, "id": 1 }',success:jQuery.proxy(function(t){"remote"==$.mobile.activePage.attr("id")&&$("#volumeslider").val(t.result.volume).slider("refresh"),$("#volumeslider").on("change",function(){pwiRemote.changeVolume($(this).val())})},this),dataType:"json"})},changeVolume:function(t){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?SendRemoteKey",data:'{ "jsonrpc": "2.0", "method": "Application.GetProperties", "params": { "properties": [ "volume" ] }, "id": 1 }',success:jQuery.proxy(function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?SendRemoteKey",data:'{ "jsonrpc": "2.0", "method": "Application.SetVolume", "params": { "volume": '+t+' }, "id": 1 }',success:jQuery.proxy(function(){},this),dataType:"json"})},this),dataType:"json"})}},pwiMovies={showMain:function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetMovies",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetMovies", "params": { "limits": { "start": 0 }, "properties": [ "title" ], "sort": { "method": "sorttitle", "ignorearticle": true } }, "id": 1 }',success:jQuery.proxy(function(t){var e="-1"
$("#moviemainlist").html(""),$.each($(t.result.movies),jQuery.proxy(function(t,i){var s=0==i.title.indexOf("The ")?i.title.substr(4,1):i.title.substr(0,1)
64<s.charCodeAt(0)&&s.charCodeAt(0)<91?s!=e?($("#moviemainlist").append('<li><a href="#movies-overview" data-movie-starts-with="'+s+'"> '+s+'<p class="ui-li-count" data-movie-starts-with-count="'+s+'">1</p></a></li>').trigger("create"),e=s):$('[data-movie-starts-with-count="'+s+'"]').text($('[data-movie-starts-with-count="'+s+'"]').text()- -1):"-1"==e?($("#moviemainlist").append('<li><a href="#movies-overview" data-movie-starts-with="#">#</a><p class="ui-li-count" data-movie-starts-with-count="#">1</p></li>'),e=s):$('[data-movie-starts-with-count="#"]').text($('[data-movie-starts-with-count="#"]').text()- -1)}))
try{$("#moviemainlist").listview("refresh")}catch(i){}$("[data-movie-starts-with]").on("click",function(){localStorage.setItem("movie-starts-with",$(this).attr("data-movie-starts-with"))})},this),dataType:"json"})},showOverview:function(){var t=localStorage.getItem("movie-starts-with")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetMovies",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetMovies", "params": { "limits": { "start": 0 }, "properties": [ "thumbnail", "tagline", "title", "rating" ], "sort": { "method": "sorttitle", "ignorearticle": true } }, "id": 1 }',success:jQuery.proxy(function(e){$("#movielist").html(""),$("#moviemainlist").html(""),$.each($(e.result.movies),jQuery.proxy(function(e,i){for(var s=0==i.title.indexOf("The ")?i.title.substr(4,1):i.title.substr(0,1),a="",e=0;10>e;e+=2)a+=e<Math.round(i.rating)?'<img src="images/star.png" alt="Star" />':'<img src="images/star-gray.png" alt="Star" />'
"#"!=t||isNaN(s)?s.toUpperCase()==t&&$("#movielist").append('<li><a href="#movies-details" data-movie-id="'+i.movieid+'"><img src="/image/'+encodeURI(i.thumbnail)+'" alt="Thumnail" />'+i.title+"<br />"+a+'<br /><span class="smallfont">'+i.tagline+"</span></a></li>").trigger("create"):$("#movielist").append('<li><a href="#movies-details" data-movie-id="'+i.movieid+'"><img src="/image/'+encodeURI(i.thumbnail)+'" alt="Thumnail" />'+i.title+"<br />"+a+'<br /><span class="smallfont">'+i.tagline+"</span></a></li>").trigger("create")}))
try{$("#movielist").listview("refresh")}catch(i){}$("[data-movie-id]").on("click",function(){localStorage.setItem("movie-id",$(this).attr("data-movie-id"))})},this),dataType:"json"})},showDetails:function(){var t=localStorage.getItem("movie-id")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetMovies",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetMovieDetails", "params": { "movieid": '+t+', "properties": [ "genre", "director", "cast", "tagline", "plot", "title", "lastplayed", "runtime", "year", "playcount", "rating", "thumbnail" ] }, "id": 1 }',success:jQuery.proxy(function(t){$("#movie-details").html(""),$("#movie-details").append('<li data-role="list-divider" id="movie-plot">Plot</li>'),$("#movie-details").append('<li data-role="list-divider" id="movie-genres">Genres</li>'),$("#movie-details").append('<li data-role="list-divider" id="movie-cast">Cast</li>'),$("#movie-details").append('<li data-role="list-divider" id="movie-crew">Director</li>'),$("#movie-details").append('<li data-role="list-divider" id="movie-info">More info</li>'),$("#movie-details").append('<li data-role="list-divider" id="movie-actions">Actions</li>'),$("#movie-title").text(t.result.moviedetails.title),$("#movie-plot").after("<li>"+t.result.moviedetails.plot+"</li>"),$("#movie-genres").after(pwiUtils.split(t.result.moviedetails.genre))
for(var e=t.result.moviedetails.cast.length-1;e>=0;e--){var i=t.result.moviedetails.cast[e].thumbnail?"/image/"+encodeURI(t.result.moviedetails.cast[e].thumbnail):"images/unknown-actor.gif"
$("#movie-cast").after('<li><img src="'+i+'" alt="Actor" />'+t.result.moviedetails.cast[e].name+'<br /><span class="smallfont">'+t.result.moviedetails.cast[e].role+"</span></li>")}$("#movie-crew").after(pwiUtils.split(t.result.moviedetails.director)),$("#movie-info").after("<li>Released in "+t.result.moviedetails.year+"</li>"),$("#movie-info").after("<li>Duration: "+Math.round(t.result.moviedetails.runtime/60)+" minutes</li>"),$("#movie-actions").after('<li><a data-role="button" href="javascript:pwiMovies.playMovie();">Play movie</a></li>'),$("#movie-details").listview("refresh"),$("[data-role=button]").button()},this),dataType:"json"})},playMovie:function(){var t=localStorage.getItem("movie-id")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?PlayMovie",data:'{ "jsonrpc": "2.0", "method": "Player.Open", "params": { "item": { "movieid": '+t+' } }, "id": 1 }',success:jQuery.proxy(function(){},this),dataType:"json"})}},pwiTvShows={showMain:function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetTVShows",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetTVShows", "params": { "limits": { "start": 0 }, "properties": [ "title" ], "sort": { "method": "sorttitle", "ignorearticle": true } }, "id": 1 }',success:jQuery.proxy(function(t){var e="-1"
$("#tvshowmainlist").html(""),$.each($(t.result.tvshows),jQuery.proxy(function(t,i){var s=0==i.title.indexOf("The ")?i.title.substr(4,1):i.title.substr(0,1)
64<s.charCodeAt(0)&&s.charCodeAt(0)<91?s!=e?($("#tvshowmainlist").append('<li><a href="#tvshows-overview" data-tvshow-starts-with="'+s+'"> '+s+'<p class="ui-li-count" data-tvshow-starts-with-count="'+s+'">1</p></a></li>').trigger("create"),e=s):$('[data-tvshow-starts-with-count="'+s+'"]').text($('[data-tvshow-starts-with-count="'+s+'"]').text()- -1):"-1"==e?($("#tvshowmainlist").append('<li><a href="#tvshows-overview" data-tvshow-starts-with="#">#<p class="ui-li-count" data-tvshow-starts-with-count="#">1</p></a></li>'),e=s):$('[data-tvshow-starts-with-count="#"]').text($('[data-tvshow-starts-with-count="#"]').text()- -1)}))
try{$("#tvshowmainlist").listview("refresh")}catch(i){}$("[data-tvshow-starts-with]").on("click",function(){localStorage.setItem("tvshow-starts-with",$(this).attr("data-tvshow-starts-with"))})},this),dataType:"json"})},showOverview:function(){var t=localStorage.getItem("tvshow-starts-with")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetTVShows",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetTVShows", "params": { "limits": { "start": 0 }, "properties": [ "thumbnail", "title", "rating" ], "sort": { "method": "sorttitle", "ignorearticle": true } }, "id": 1 }',success:jQuery.proxy(function(e){$("#tvshowlist").html(""),$.each($(e.result.tvshows),jQuery.proxy(function(e,i){for(var s=0==i.title.indexOf("The ")?i.title.substr(4,1):i.title.substr(0,1),a="",e=0;10>e;e+=2)a+=e<Math.round(i.rating)?'<img src="images/star.png" alt="Star" />':'<img src="images/star-gray.png" alt="Star" />'
"#"==t&&(65>s.charCodeAt(0)||s.charCodeAt(0)>91)?$("#tvshowlist").append('<li><a href="#tvshows-seasons" data-tvshow-id="'+i.tvshowid+'"><img src="/image/'+encodeURI(i.thumbnail)+'" alt="Thumnail" />'+i.title+"<br />"+a+"</li>").trigger("create"):s.toUpperCase()==t&&$("#tvshowlist").append('<li><a href="#tvshows-seasons" data-tvshow-id="'+i.tvshowid+'"><img src="/image/'+encodeURI(i.thumbnail)+'" alt="Thumnail" />'+i.title+"<br />"+a+"</li>").trigger("create")}))
try{$("#tvshowlist").listview("refresh")}catch(i){}$("[data-tvshow-id]").on("click",function(){localStorage.setItem("tvshow-id",$(this).attr("data-tvshow-id"))})},this),dataType:"json"})},showSeasons:function(){var t=localStorage.getItem("tvshow-id")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetSeasons",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetSeasons", "params": { "properties": [ "season", "showtitle" ], "sort" : { "method": "sorttitle" }, "tvshowid" : '+t+' }, "id": 1 }',success:jQuery.proxy(function(t){$("#tvshowseasonslist").html(""),$.each($(t.result.seasons),jQuery.proxy(function(t,e){$("#tvshowseasons-title").text(e.showtitle),$("#tvshowseasonslist").append('<li><a href="#tvshows-episodes" data-tvshow-season="'+e.season+'">'+e.label+"</li>").trigger("create")}))
try{$("#tvshowseasonslist").listview("refresh")}catch(e){}$("[data-tvshow-season]").on("click",function(){localStorage.setItem("tvshow-season",$(this).attr("data-tvshow-season"))})},this),dataType:"json"})},showEpisodes:function(){var t=localStorage.getItem("tvshow-id"),e=localStorage.getItem("tvshow-season")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetEpisodes",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetEpisodes", "params": { "properties": [ "title", "episode", "thumbnail", "playcount" ], "sort" : { "method": "episode" }, "tvshowid" : '+t+', "season" : '+e+' }, "id": 1 }',success:jQuery.proxy(function(t){$("#tvshowepisodeslist").html(""),$.each($(t.result.episodes),jQuery.proxy(function(t,i){$("#tvshowepisodes-title").text("Season "+e)
var s=i.playcount>0?"Watched":""
$("#tvshowepisodeslist").append('<li><a href="#tvshows-episodes-details" data-tvshow-episode="'+i.episodeid+'"><img src="/image/'+encodeURI(i.thumbnail)+'" alt="Thumnail" />'+i.episode+" - "+i.title+'<br /><span class="smallerfont">'+s+"</span></li>").trigger("create")}))
try{$("#tvshowepisodeslist").listview("refresh")}catch(i){}$("[data-tvshow-episode]").on("click",function(){localStorage.setItem("tvshow-episode",$(this).attr("data-tvshow-episode"))})},this),dataType:"json"})},showEpisodeDetails:function(){var t=localStorage.getItem("tvshow-episode")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetEpisodeDetails",data:'{ "jsonrpc": "2.0", "method": "VideoLibrary.GetEpisodeDetails", "params": { "episodeid": '+t+', "properties": [ "director", "cast", "plot", "title", "lastplayed", "runtime", "firstaired", "playcount", "rating", "thumbnail" ] }, "id": 1 }',success:jQuery.proxy(function(e){$("#episode-details").html(""),$("#episode-details").append('<li data-role="list-divider" id="episode-plot">Plot</li>'),$("#episode-details").append('<li data-role="list-divider" id="episode-cast">Cast</li>'),$("#episode-details").append('<li data-role="list-divider" id="episode-crew">Director</li>'),$("#episode-details").append('<li data-role="list-divider" id="episode-info">More info</li>'),$("#episode-details").append('<li data-role="list-divider" id="episode-actions">Actions</li>'),$("#episode-title").text(e.result.episodedetails.title),$("#episode-plot").after("<li>"+e.result.episodedetails.plot+"</li>")
for(var i=e.result.episodedetails.cast.length-1;i>=0;i--){var s=e.result.episodedetails.cast[i].thumbnail?"/image/"+encodeURI(e.result.episodedetails.cast[i].thumbnail):"images/unknown-actor.gif"
$("#episode-cast").after('<li><img src="'+s+'" alt="Actor" />'+e.result.episodedetails.cast[i].name+'<br /><span class="smallfont">'+e.result.episodedetails.cast[i].role+"</span></li>")}$("#episode-crew").after(pwiUtils.split(e.result.episodedetails.director)),$("#episode-info").after("<li>First aired on "+e.result.episodedetails.firstaired+"</li>"),$("#episode-info").after("<li>Duration: "+Math.round(e.result.episodedetails.runtime/60)+" minutes</li>"),$("#episode-actions").after('<li><a data-role="button" onclick="pwiTvShows.playEpisode('+t+');">Play episode</a></li>'),$("#episode-details").listview("refresh"),$("[data-role=button]").button()},this),dataType:"json"})},playEpisode:function(t){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?AddTvShowToPlaylist",data:'{ "jsonrpc": "2.0", "method": "Player.Open", "params": { "item": { "episodeid": '+t+' } }, "id": 1 }',success:jQuery.proxy(function(){},this),dataType:"json"})}},pwiMusic={showMain:function(){jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetArtists",data:'{ "jsonrpc": "2.0", "method": "AudioLibrary.GetArtists", "params": { "limits": { "start": 0 }, "properties": [], "sort": { "method": "label", "ignorearticle": true } }, "id": 1 }',success:jQuery.proxy(function(t){var e="-1"
$("#musicmainlist").html(""),$.each($(t.result.artists),jQuery.proxy(function(t,i){var s=0==i.label.indexOf("The ")?i.label.substr(4,1):0==i.label.indexOf("De ")?i.label.substr(3,1):i.label.substr(0,1)
s=s.toUpperCase(),64<s.charCodeAt(0)&&s.charCodeAt(0)<91?s!=e?($("#musicmainlist").append('<li><a href="#music-artists" data-artists-start-with="'+s+'"> '+s+'<p class="ui-li-count" data-artists-start-with-count="'+s+'">1</p></a></li>').trigger("create"),e=s):$('[data-artists-start-with-count="'+s+'"]').text($('[data-artists-start-with-count="'+s+'"]').text()- -1):"-1"==e?($("#musicmainlist").append('<li><a href="#music-artists" data-artists-start-with="#">#<p class="ui-li-count" data-artists-start-with-count="#">1</p></a></li>'),e=s):$('[data-artists-start-with-count="#"]').text($('[data-artists-start-with-count="#"]').text()- -1)}))
try{$("#musicmainlist").listview("refresh")}catch(i){}$("[data-artists-start-with]").on("click",function(){localStorage.setItem("music-artists-start-with",$(this).attr("data-artists-start-with"))})},this),dataType:"json"})},showArtists:function(){var t=localStorage.getItem("music-artists-start-with")
localStorage.removeItem("music-album"),jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetArtists",data:'{ "jsonrpc": "2.0", "method": "AudioLibrary.GetArtists", "params": { "limits": { "start": 0 }, "properties": [], "sort": { "method": "label", "ignorearticle": true } }, "id": 1 }',success:jQuery.proxy(function(e){$("#artistlist").html(""),$.each($(e.result.artists),jQuery.proxy(function(e,i){var s=0==i.label.indexOf("The ")?i.label.substr(4,1):0==i.label.indexOf("De ")?i.label.substr(3,1):i.label.substr(0,1)
s=s.toUpperCase(),("#"==t&&(65>s.charCodeAt(0)||s.charCodeAt(0)>91)||s.toUpperCase()==t)&&$("#artistlist").append('<li><a href="#music-artists-songs" data-music-artist="'+i.artistid+'">'+i.label+'</a><a href="#music-artists-albums" data-music-artist="'+i.artistid+'">Albums</a></li>').trigger("create")}))
try{$("#artistlist").listview("refresh")}catch(i){}$("[data-music-artist]").on("click",function(){localStorage.setItem("music-artist",$(this).attr("data-music-artist"))})},this),dataType:"json"})},showArtistAlbums:function(){var t=localStorage.getItem("music-artist")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetArtists",data:'{ "jsonrpc": "2.0", "method": "AudioLibrary.GetAlbums", "params": { "limits": { "start": 0 }, "properties": [ "title", "artist", "thumbnail" ], "sort": { "method": "title", "ignorearticle": true } }, "filter": { "artistid": '+t+' }, "id": 1 }',success:jQuery.proxy(function(t){$("#albumlist").html(""),$.each($(t.result.albums),jQuery.proxy(function(t,e){$("#albums-title").text(e.artist),$("#albumlist").append('<li><a href="#music-artists-songs" data-music-album="'+e.albumid+'"><img src="/image/'+encodeURI(e.thumbnail)+'" alt="Thumbnail" />'+e.title+"</li>").trigger("create")}))
try{$("#albumlist").listview("refresh")}catch(e){}$("[data-music-album]").on("click",function(){localStorage.setItem("music-album",$(this).attr("data-music-album"))})},this),dataType:"json"})},showArtistSongs:function(){var t=localStorage.getItem("music-artist"),e=null==localStorage.getItem("music-album")?'"artistid": '+t:'"albumid": '+localStorage.getItem("music-album"),i=null==localStorage.getItem("music-album")?"#music-artists":"#music-artists-albums"
$('#music-artists-songs a[data-icon="back"]').attr("href",i),jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?GetArtists",data:'{ "jsonrpc": "2.0", "method": "AudioLibrary.GetSongs", "params": { "limits": { "start": 0 }, "properties": [ "artist", "title", "album", "duration", "thumbnail" ], "sort": { "method": "title", "ignorearticle": true } }, "filter": { '+e+' }, "id": 1 }',success:jQuery.proxy(function(t){$("#songlist").html(""),$.each($(t.result.songs),jQuery.proxy(function(t,e){$("#songlist").append('<li><a href="javascript:pwiMusic.playSong();" data-music-song="'+e.songid+'"><img src="/image/'+encodeURI(e.thumbnail)+'" alt="Thubnail" />'+e.title+'<br /><span class="smallfont">'+e.artist+'</span><br /><span class="smallfont">'+e.album+"</span></li>").trigger("create")}))
try{$("#songlist").listview("refresh")}catch(e){}$("[data-music-song]").on("click",function(){localStorage.setItem("music-song",$(this).attr("data-music-song"))})},this),dataType:"json"})},playSong:function(){var t=localStorage.getItem("music-song")
jQuery.ajax({type:"POST",contentType:"application/json",url:pwiCore.JSON_RPC+"?AddSongToPlaylist",data:'{ "jsonrpc": "2.0", "method": "Player.Open", "params": { "item": { "songid": '+t+' } }, "id": 1 }',success:jQuery.proxy(function(){},this),dataType:"json"})}},pwiUtils={split:function(t){for(var e="",i=0;i<t.length;i++)e+="<li>"+t[i]+"</li>"
return e},leadingZero:function(t){var e="0"+t
return e.substr(e.length-2)}}
$(document).delegate(document,"pageshow",pwiCore.init),$(document).delegate(document,"pageshow",pwiRemote.init),$(document).delegate("#movies-main","pageshow",pwiMovies.showMain),$(document).delegate("#movies-overview","pageshow",pwiMovies.showOverview),$(document).delegate("#movies-details","pageshow",pwiMovies.showDetails),$(document).delegate("#tvshows-main","pageshow",pwiTvShows.showMain),$(document).delegate("#tvshows-overview","pageshow",pwiTvShows.showOverview),$(document).delegate("#tvshows-seasons","pageshow",pwiTvShows.showSeasons),$(document).delegate("#tvshows-episodes","pageshow",pwiTvShows.showEpisodes),$(document).delegate("#tvshows-episodes-details","pageshow",pwiTvShows.showEpisodeDetails),$(document).delegate("#music-main","pageshow",pwiMusic.showMain),$(document).delegate("#music-artists","pageshow",pwiMusic.showArtists),$(document).delegate("#music-artists-albums","pageshow",pwiMusic.showArtistAlbums),$(document).delegate("#music-artists-songs","pageshow",pwiMusic.showArtistSongs)
